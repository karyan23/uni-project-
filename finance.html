<!DOCTYPE html>
<html>
<head>
    <title>Finance Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial;
            background: #f4f4f4;
            display: flex;
            justify-content: center;
            transition: 0.3s;
        }

        .container {
            background: white;
            padding: 20px;
            width: 90%;
            max-width: 400px;
            margin-top: 40px;
            border-radius: 10px;
        }

        h1 {
            text-align: center;
        }

        .summary {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }

        .income {
            color: green;
        }

        .expense {
            color: red;
        }

        form input, form select, form button {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
        }

        button {
            background: black;
            color: white;
            border: none;
            cursor: pointer;
        }

        li {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 14px;
        }

        canvas {
            margin-top: 15px;
        }

        /* Dark Mode */
        .dark {
            background: #121212;
            color: white;
        }

        .dark .container {
            background: #1e1e1e;
        }
    </style>
</head>

<body>

<div class="container">
    <h1>ðŸ’° Finance Tracker</h1>

    <button id="toggle">ðŸŒ™ Dark Mode</button>

    <h2>Balance: â‚¹<span id="balance">0</span></h2>

    <div class="summary">
        <div class="income">
            <h3>Income</h3>
            <p>â‚¹<span id="income">0</span></p>
        </div>
        <div class="expense">
            <h3>Expense</h3>
            <p>â‚¹<span id="expense">0</span></p>
        </div>
    </div>

    <h3>Add Transaction</h3>
    <form id="form">
        <input type="text" id="text" placeholder="Enter description" required>
        <input type="number" id="amount" placeholder="Enter amount" required>
        <input type="date" id="date" required>
        <select id="type">
            <option value="income">Income</option>
            <option value="expense">Expense</option>
        </select>
        <button type="submit">Add</button>
    </form>

    <h3>History</h3>
    <ul id="list"></ul>

    <h3>Expense Chart</h3>
    <canvas id="myChart"></canvas>
</div>

<script>
const balance = document.getElementById("balance");
const income = document.getElementById("income");
const expense = document.getElementById("expense");
const list = document.getElementById("list");
const form = document.getElementById("form");
const text = document.getElementById("text");
const amount = document.getElementById("amount");
const type = document.getElementById("type");
const date = document.getElementById("date");
const toggle = document.getElementById("toggle");

let transactions = JSON.parse(localStorage.getItem("transactions")) || [];
let chart;

function updateLocalStorage() {
    localStorage.setItem("transactions", JSON.stringify(transactions));
}

function updateUI() {
    list.innerHTML = "";
    let totalIncome = 0;
    let totalExpense = 0;

    let expenseLabels = [];
    let expenseData = [];

    transactions.forEach((transaction, index) => {
        const li = document.createElement("li");
        li.innerHTML = `
            ${transaction.text} - ${transaction.date} (â‚¹${transaction.amount})
            <button onclick="deleteTransaction(${index})">X</button>
        `;
        list.appendChild(li);

        if (transaction.type === "income") {
            totalIncome += transaction.amount;
        } else {
            totalExpense += transaction.amount;
            expenseLabels.push(transaction.text);
            expenseData.push(transaction.amount);
        }
    });

    income.innerText = totalIncome;
    expense.innerText = totalExpense;
    balance.innerText = totalIncome - totalExpense;

    const ctx = document.getElementById("myChart").getContext("2d");

    if (chart) chart.destroy();

    chart = new Chart(ctx, {
        type: "pie",
        data: {
            labels: expenseLabels,
            datasets: [{
                data: expenseData
            }]
        }
    });
}

function deleteTransaction(index) {
    transactions.splice(index, 1);
    updateLocalStorage();
    updateUI();
}

form.addEventListener("submit", function(e) {
    e.preventDefault();

    const newTransaction = {
        text: text.value,
        amount: +amount.value,
        type: type.value,
        date: date.value
    };

    transactions.push(newTransaction);

    updateLocalStorage();
    updateUI();

    text.value = "";
    amount.value = "";
    date.value = "";
});

toggle.addEventListener("click", () => {
    document.body.classList.toggle("dark");
});

updateUI();
</script>

</body>
</html>
